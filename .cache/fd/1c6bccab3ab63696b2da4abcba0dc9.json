{"id":"node_modules/@snap/camera-kit/lib/handlers/timeoutHandler.js","dependencies":[{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/handlers/timeoutHandler.js.map","includedInParent":true,"mtime":1710948721307},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/package.json","includedInParent":true,"mtime":1710952305120},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/package.json","includedInParent":true,"mtime":1710948721086},{"name":"../common/copyDefinedProperties","loc":{"line":1,"column":38,"index":38},"parent":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/handlers/timeoutHandler.js","resolved":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/common/copyDefinedProperties.js"},{"name":"../common/typeguards","loc":{"line":2,"column":25,"index":98},"parent":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/handlers/timeoutHandler.js","resolved":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/common/typeguards.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTimeoutHandler = void 0;\nvar _copyDefinedProperties = require(\"../common/copyDefinedProperties\");\nvar _typeguards = require(\"../common/typeguards\");\nconst sleep = millis => new Promise(resolve => setTimeout(resolve, millis));\nconst defaultOptions = {\n  createError: request => {\n    // The string and Request types are very common, so our default error creator special-cases those types to\n    // provide better error messages.\n    const destination = (0, _typeguards.isString)(request) ? `for ${request}` : request instanceof Request ? `for ${request.url}` : \"\";\n    return new Error(`Request ${destination} timed out by client timeout handler.`);\n  },\n  timeout: 30 * 1000\n};\n/**\n * Timeout requests after a given number of milliseconds, rejecting the Response promise with a custom error.\n *\n * @param options\n * @returns {@link ChainableHandler}, suitable for use in {@link HandlerChainBuilder.map}\n */\nconst createTimeoutHandler = (options = {}) => {\n  const definedOptions = (0, _copyDefinedProperties.copyDefinedProperties)(options);\n  const {\n    createError,\n    timeout\n  } = Object.assign(Object.assign({}, defaultOptions), definedOptions);\n  // If the timeout Promise wins the race, the HandlerChainBuilder sets the abort signal for subsequent handlers. They\n  // may look at the abort signal in order to terminate themselves early.\n  return next => (req, meta) => Promise.race([next(req, meta), sleep(timeout).then(() => Promise.reject(createError(req, meta)))]);\n};\nexports.createTimeoutHandler = createTimeoutHandler;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":26}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":29}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":36}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":15}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":18}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":25}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":9,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":6},"generated":{"line":9,"column":6}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":11},"generated":{"line":9,"column":11}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":15},"generated":{"line":9,"column":14}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":29},"generated":{"line":9,"column":20}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":34},"generated":{"line":9,"column":24}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":38},"generated":{"line":9,"column":28}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":45},"generated":{"line":9,"column":35}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":53},"generated":{"line":9,"column":36}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":60},"generated":{"line":9,"column":43}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":65},"generated":{"line":9,"column":47}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":75},"generated":{"line":9,"column":57}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":76},"generated":{"line":9,"column":58}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":83},"generated":{"line":9,"column":65}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":85},"generated":{"line":9,"column":67}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":91},"generated":{"line":9,"column":73}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":92},"generated":{"line":9,"column":74}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":5,"column":93},"generated":{"line":9,"column":75}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":10,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":10,"column":6}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":7,"column":20},"generated":{"line":10,"column":20}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":7,"column":55},"generated":{"line":10,"column":23}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":8,"column":4},"generated":{"line":11,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":8,"column":15},"generated":{"line":11,"column":13}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":8,"column":18},"generated":{"line":11,"column":15}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":8,"column":25},"generated":{"line":11,"column":22}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":8,"column":29},"generated":{"line":11,"column":26}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":9,"column":8},"generated":{"line":12,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":13,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":14,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":14,"column":10}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":25},"generated":{"line":14,"column":21}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":28},"generated":{"line":14,"column":24}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":28},"generated":{"line":14,"column":28}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":36},"generated":{"line":14,"column":48}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":37},"generated":{"line":14,"column":50}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":44},"generated":{"line":14,"column":57}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":14,"column":58}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":12,"column":14},"generated":{"line":14,"column":61}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":12,"column":21},"generated":{"line":14,"column":68}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":12,"column":28},"generated":{"line":14,"column":75}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":12,"column":30},"generated":{"line":14,"column":77}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":13,"column":14},"generated":{"line":14,"column":80}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":14,"column":87}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":13,"column":33},"generated":{"line":14,"column":99}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":13,"column":40},"generated":{"line":14,"column":106}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":14,"column":109}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":21},"generated":{"line":14,"column":116}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":28},"generated":{"line":14,"column":123}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":29},"generated":{"line":14,"column":124}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":32},"generated":{"line":14,"column":127}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":14,"column":34},"generated":{"line":14,"column":129}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":14,"column":132}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":15,"column":16},"generated":{"line":14,"column":134}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":8},"generated":{"line":15,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":15},"generated":{"line":15,"column":11}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":19},"generated":{"line":15,"column":15}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":24},"generated":{"line":15,"column":20}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":25},"generated":{"line":15,"column":21}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":36},"generated":{"line":15,"column":32}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":47},"generated":{"line":15,"column":43}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":86},"generated":{"line":15,"column":82}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":16,"column":87},"generated":{"line":15,"column":83}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":16,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":17,"column":5},"generated":{"line":16,"column":3}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":18,"column":4},"generated":{"line":17,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":18,"column":11},"generated":{"line":17,"column":9}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":17,"column":11}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":18,"column":15},"generated":{"line":17,"column":13}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":18,"column":18},"generated":{"line":17,"column":16}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":19,"column":1},"generated":{"line":18,"column":1}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":33,"column":0},"generated":{"line":19,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":39,"column":7},"generated":{"line":25,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":25,"column":6}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":39,"column":33},"generated":{"line":25,"column":26}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":39,"column":36},"generated":{"line":25,"column":29}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":25,"column":30}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":25,"column":37}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":40,"column":51},"generated":{"line":25,"column":40}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":40,"column":51},"generated":{"line":25,"column":41}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":40,"column":53},"generated":{"line":25,"column":42}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":41,"column":48},"generated":{"line":25,"column":47}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":4},"generated":{"line":26,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":26,"column":8}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":24},"generated":{"line":26,"column":22}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":27},"generated":{"line":26,"column":25}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":27},"generated":{"line":26,"column":29}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":48},"generated":{"line":26,"column":73}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":49},"generated":{"line":26,"column":75}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":56},"generated":{"line":26,"column":82}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":42,"column":57},"generated":{"line":26,"column":83}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":27,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":10},"generated":{"line":27,"column":8}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":28,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":28,"column":15}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":25},"generated":{"line":29,"column":4}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":32},"generated":{"line":30,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":3}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":6}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":12}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":13}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":19}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":20}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":26}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":27}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":33}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":34}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":35}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":30,"column":36}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":42},"generated":{"line":30,"column":38}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":56},"generated":{"line":30,"column":52}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":56},"generated":{"line":30,"column":53}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":61},"generated":{"line":30,"column":55}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":75},"generated":{"line":30,"column":69}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":43,"column":77},"generated":{"line":30,"column":70}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":45,"column":4},"generated":{"line":31,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":32,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":33,"column":2}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":33,"column":9}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":33,"column":13}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":21},"generated":{"line":33,"column":17}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":22},"generated":{"line":33,"column":18}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":25},"generated":{"line":33,"column":21}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":27},"generated":{"line":33,"column":23}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":47,"column":31},"generated":{"line":33,"column":27}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":33,"column":32}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":15},"generated":{"line":33,"column":39}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":16},"generated":{"line":33,"column":40}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":33,"column":44}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":21},"generated":{"line":33,"column":45}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":22},"generated":{"line":33,"column":46}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":26},"generated":{"line":33,"column":50}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":33,"column":51}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":30},"generated":{"line":33,"column":54}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":32},"generated":{"line":33,"column":56}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":36},"generated":{"line":33,"column":60}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":37},"generated":{"line":33,"column":61}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":39},"generated":{"line":33,"column":63}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":44},"generated":{"line":33,"column":68}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":45},"generated":{"line":33,"column":69}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":52},"generated":{"line":33,"column":76}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":53},"generated":{"line":33,"column":77}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":54},"generated":{"line":33,"column":78}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":58},"generated":{"line":33,"column":82}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":59},"generated":{"line":33,"column":83}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":65},"generated":{"line":33,"column":89}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":72},"generated":{"line":33,"column":96}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":73},"generated":{"line":33,"column":97}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":79},"generated":{"line":33,"column":103}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":80},"generated":{"line":33,"column":104}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":91},"generated":{"line":33,"column":115}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":92},"generated":{"line":33,"column":116}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":95},"generated":{"line":33,"column":119}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":97},"generated":{"line":33,"column":121}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":101},"generated":{"line":33,"column":125}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":102},"generated":{"line":33,"column":126}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":103},"generated":{"line":33,"column":127}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":104},"generated":{"line":33,"column":128}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":105},"generated":{"line":33,"column":129}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":48,"column":106},"generated":{"line":33,"column":130}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":34,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":1},"generated":{"line":34,"column":1}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":0}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":7}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":8}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":28}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":31}},{"source":"../../src/handlers/timeoutHandler.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":35,"column":51}}],"sources":{"../../src/handlers/timeoutHandler.ts":"import { copyDefinedProperties } from \"../common/copyDefinedProperties\";\nimport { isString } from \"../common/typeguards\";\nimport { ChainableHandler, RequestMetadata } from \"./HandlerChainBuilder\";\n\nconst sleep = (millis: number) => new Promise<void>((resolve) => setTimeout(resolve, millis));\n\nconst defaultOptions: TimeoutHandlerOptions<unknown> = {\n    createError: (request) => {\n        // The string and Request types are very common, so our default error creator special-cases those types to\n        // provide better error messages.\n        const destination = isString(request)\n            ? `for ${request}`\n            : request instanceof Request\n            ? `for ${request.url}`\n            : \"\";\n        return new Error(`Request ${destination} timed out by client timeout handler.`);\n    },\n    timeout: 30 * 1000,\n};\n\nexport interface TimeoutHandlerOptions<Req> {\n    /**\n     * A function that returns a new Error instance when a timeout occurs.\n     */\n    createError: (req: Req, meta?: RequestMetadata | void) => Error;\n\n    /**\n     * Abort requests after this number of milliseconds. Defaults to 30 seconds.\n     */\n    timeout: number;\n}\n\n/**\n * Timeout requests after a given number of milliseconds, rejecting the Response promise with a custom error.\n *\n * @param options\n * @returns {@link ChainableHandler}, suitable for use in {@link HandlerChainBuilder.map}\n */\nexport const createTimeoutHandler = <Req, Res, Meta extends RequestMetadata>(\n    options: Partial<TimeoutHandlerOptions<Req>> = {}\n): ChainableHandler<Req, Res, Req, Res, Meta> => {\n    const definedOptions = copyDefinedProperties(options);\n    const { createError, timeout } = { ...defaultOptions, ...definedOptions };\n\n    // If the timeout Promise wins the race, the HandlerChainBuilder sets the abort signal for subsequent handlers. They\n    // may look at the abort signal in order to terminate themselves early.\n    return (next) => (req, meta) =>\n        Promise.race([next(req, meta), sleep(timeout).then(() => Promise.reject(createError(req, meta)))]);\n};\n"},"lineCount":null}},"error":null,"hash":"bbdc15343da9ec19d06dbe4e2191c8d4","cacheData":{"env":{}}}