{"id":"node_modules/@snap/camera-kit/lib/events/TypedEventTarget.js","dependencies":[{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/events/TypedEventTarget.js.map","includedInParent":true,"mtime":1710948721309},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/package.json","includedInParent":true,"mtime":1710952305120},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/package.json","includedInParent":true,"mtime":1710948721086}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypedEventTarget = void 0;\n/**\n * This wrapper around EventTarget provides more descriptive type information. By using this class, calls to EventTarget\n * methods are correctly type checked to ensure only allowed event types are used, and that events and their type\n * strings are correctly associated.\n *\n * For example, when calling TypedEventTarget::addEventListener, the event passed to the callback will have the correct\n * type corresponding to the type of event for which the listener has been added.\n */\nclass TypedEventTarget {\n  constructor() {\n    this.listeners = new Map();\n    this.options = new Map();\n  }\n  addEventListener(type, callback, options) {\n    var _a;\n    // Safety: the type in the method signature ensures the callback handles events of type K, and we use that type\n    // as the key when storing the callback – we only ever invoke callbacks obtained by mapping from that event\n    // type to the callback, so even though we store the callback with a wider type, we only ever call it with the\n    // specific event type specified by K.\n    const listener = callback;\n    const listeners = (_a = this.listeners.get(type)) !== null && _a !== void 0 ? _a : [];\n    this.listeners.set(type, [...listeners, listener]);\n    if (options) this.options.set(listener, options);\n  }\n  dispatchEvent(event) {\n    const listeners = this.listeners.get(event.type);\n    if (!listeners) return true;\n    listeners.forEach(listener => {\n      var _a;\n      const options = (_a = this.options.get(listener)) !== null && _a !== void 0 ? _a : {};\n      try {\n        listener(event);\n      } catch (error) {\n        // We'll do our best to immitate native behavior, where if a listener throws an error it is caught and\n        // emitted as an error event on the window – this might be slightly different from native behavior since\n        // we have to use a CustomEvent, but it's as close as we can get.\n        if (window) window.dispatchEvent(new CustomEvent(\"error\", {\n          detail: error\n        }));\n      }\n      if (options.once) this.removeEventListener(event.type, listener);\n    });\n    return true;\n  }\n  removeEventListener(type, callback) {\n    const listener = callback;\n    const listeners = this.listeners.get(type);\n    if (!listeners) return;\n    this.listeners.set(type, listeners.filter(l => l !== listener));\n    this.options.delete(listener);\n  }\n}\nexports.TypedEventTarget = TypedEventTarget;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":7,"column":0}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":24,"column":6},"generated":{"line":15,"column":0}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":15,"column":6}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":24,"column":29},"generated":{"line":15,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":24,"column":29},"generated":{"line":15,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":16,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":16,"column":13}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":16,"column":14}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":16,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":17,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":12},"generated":{"line":17,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":17,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":22},"generated":{"line":17,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":25},"generated":{"line":17,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":29},"generated":{"line":17,"column":25}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":32},"generated":{"line":17,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":32},"generated":{"line":17,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":29,"column":34},"generated":{"line":17,"column":30}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":18,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":18,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":18,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":20},"generated":{"line":18,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":23},"generated":{"line":18,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":27},"generated":{"line":18,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":18,"column":26}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":18,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":30,"column":32},"generated":{"line":18,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":19,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":20,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":33,"column":20},"generated":{"line":20,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":20,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":20,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":20,"column":25}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":35,"column":60},"generated":{"line":20,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":20,"column":35}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":36,"column":43},"generated":{"line":20,"column":42}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":36,"column":43},"generated":{"line":20,"column":44}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":22,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":23,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":24,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":25,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":26,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":42,"column":14},"generated":{"line":26,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":42,"column":22},"generated":{"line":26,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":42,"column":25},"generated":{"line":26,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":42,"column":73},"generated":{"line":26,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":27,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":27,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":27,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":27,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":27,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":27,"column":25}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":27,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":30},"generated":{"line":27,"column":32}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":31},"generated":{"line":27,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":40},"generated":{"line":27,"column":42}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":41},"generated":{"line":27,"column":43}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":44},"generated":{"line":27,"column":46}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":45},"generated":{"line":27,"column":47}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":49},"generated":{"line":27,"column":51}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":52}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":58}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":62}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":66}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":68}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":73}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":78}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":79}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":82}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":50},"generated":{"line":27,"column":84}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":54},"generated":{"line":27,"column":87}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":43,"column":56},"generated":{"line":27,"column":89}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":28,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":28,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":28,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":22},"generated":{"line":28,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":28,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":28,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":28,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":28,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":28,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":34},"generated":{"line":28,"column":30}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":37},"generated":{"line":28,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":46},"generated":{"line":28,"column":42}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":48},"generated":{"line":28,"column":44}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":56},"generated":{"line":28,"column":52}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":57},"generated":{"line":28,"column":53}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":44,"column":58},"generated":{"line":28,"column":54}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":29,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":29,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":29,"column":15}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":21},"generated":{"line":29,"column":17}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":29,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":29,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":29,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":34},"generated":{"line":29,"column":30}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":37},"generated":{"line":29,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":38},"generated":{"line":29,"column":34}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":46},"generated":{"line":29,"column":42}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":48},"generated":{"line":29,"column":44}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":55},"generated":{"line":29,"column":51}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":45,"column":56},"generated":{"line":29,"column":52}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":30,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":31,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":31,"column":15}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":48,"column":18},"generated":{"line":31,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":48,"column":31},"generated":{"line":31,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":48,"column":31},"generated":{"line":31,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":32,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":32,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":23},"generated":{"line":32,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":32,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":30},"generated":{"line":32,"column":26}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":31},"generated":{"line":32,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":40},"generated":{"line":32,"column":36}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":41},"generated":{"line":32,"column":37}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":44},"generated":{"line":32,"column":40}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":45},"generated":{"line":32,"column":41}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":50},"generated":{"line":32,"column":46}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":51},"generated":{"line":32,"column":47}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":55},"generated":{"line":32,"column":51}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":49,"column":56},"generated":{"line":32,"column":52}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":33,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":33,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":13},"generated":{"line":33,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":22},"generated":{"line":33,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":24},"generated":{"line":33,"column":20}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":31},"generated":{"line":33,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":50,"column":35},"generated":{"line":33,"column":31}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":34,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":17},"generated":{"line":34,"column":13}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":18},"generated":{"line":34,"column":14}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":25},"generated":{"line":34,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":34,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":35},"generated":{"line":34,"column":30}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":52,"column":39},"generated":{"line":34,"column":34}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":36,"column":6}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":18},"generated":{"line":36,"column":12}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":36,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":36,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":36,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":36,"column":25}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":36,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":32},"generated":{"line":36,"column":32}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":33},"generated":{"line":36,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":40},"generated":{"line":36,"column":40}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":36,"column":41}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":44},"generated":{"line":36,"column":44}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":45},"generated":{"line":36,"column":45}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":53},"generated":{"line":36,"column":53}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":54}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":60}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":64}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":68}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":70}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":75}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":80}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":81}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":84}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":36,"column":86}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":58},"generated":{"line":36,"column":89}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":58},"generated":{"line":36,"column":90}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":53,"column":60},"generated":{"line":36,"column":91}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":37,"column":6}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":37,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":55,"column":16},"generated":{"line":38,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":55,"column":24},"generated":{"line":38,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":38,"column":17}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":55,"column":30},"generated":{"line":38,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":55,"column":31},"generated":{"line":38,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":56,"column":13},"generated":{"line":39,"column":7}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":56,"column":14},"generated":{"line":39,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":39,"column":15}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":56,"column":26},"generated":{"line":39,"column":20}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":56,"column":28},"generated":{"line":39,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":57,"column":16},"generated":{"line":40,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":41,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":42,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":43,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":43,"column":12}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":26},"generated":{"line":43,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":43,"column":20}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":34},"generated":{"line":43,"column":26}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":35},"generated":{"line":43,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":48},"generated":{"line":43,"column":40}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":49},"generated":{"line":43,"column":41}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":53},"generated":{"line":43,"column":45}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":64},"generated":{"line":43,"column":56}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":65},"generated":{"line":43,"column":57}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":72},"generated":{"line":43,"column":64}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":74},"generated":{"line":43,"column":66}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":76},"generated":{"line":44,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":82},"generated":{"line":44,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":84},"generated":{"line":44,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":89},"generated":{"line":45,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":91},"generated":{"line":45,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":92},"generated":{"line":45,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":60,"column":93},"generated":{"line":45,"column":11}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":47,"column":6}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":47,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":23},"generated":{"line":47,"column":17}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":24},"generated":{"line":47,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":47,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":30},"generated":{"line":47,"column":24}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":34},"generated":{"line":47,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":35},"generated":{"line":47,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":54},"generated":{"line":47,"column":48}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":55},"generated":{"line":47,"column":49}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":60},"generated":{"line":47,"column":54}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":61},"generated":{"line":47,"column":55}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":65},"generated":{"line":47,"column":59}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":67},"generated":{"line":47,"column":61}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":75},"generated":{"line":47,"column":69}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":62,"column":76},"generated":{"line":47,"column":70}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":48,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":63,"column":9},"generated":{"line":48,"column":5}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":48,"column":6}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":49,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":65,"column":15},"generated":{"line":49,"column":11}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":65,"column":19},"generated":{"line":49,"column":15}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":50,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":51,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":23},"generated":{"line":51,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":50},"generated":{"line":51,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":57},"generated":{"line":51,"column":26}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":59},"generated":{"line":51,"column":28}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":111},"generated":{"line":51,"column":36}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":68,"column":111},"generated":{"line":51,"column":38}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":52,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":69,"column":14},"generated":{"line":52,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":69,"column":22},"generated":{"line":52,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":69,"column":25},"generated":{"line":52,"column":21}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":69,"column":73},"generated":{"line":52,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":53,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":53,"column":10}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":23},"generated":{"line":53,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":26},"generated":{"line":53,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":30},"generated":{"line":53,"column":26}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":31},"generated":{"line":53,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":40},"generated":{"line":53,"column":36}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":41},"generated":{"line":53,"column":37}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":44},"generated":{"line":53,"column":40}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":45},"generated":{"line":53,"column":41}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":49},"generated":{"line":53,"column":45}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":70,"column":50},"generated":{"line":53,"column":46}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":54,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":71,"column":12},"generated":{"line":54,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":71,"column":13},"generated":{"line":54,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":54,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":71,"column":24},"generated":{"line":54,"column":20}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":55,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":55,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":55,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":55,"column":18}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":23},"generated":{"line":55,"column":19}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":55,"column":22}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":73,"column":12},"generated":{"line":55,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":73,"column":16},"generated":{"line":55,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":55,"column":29}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":55,"column":38}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":22},"generated":{"line":55,"column":39}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":28},"generated":{"line":55,"column":45}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":30},"generated":{"line":55,"column":46}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":31},"generated":{"line":55,"column":47}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":36},"generated":{"line":55,"column":51}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":37},"generated":{"line":55,"column":52}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":42},"generated":{"line":55,"column":57}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":50},"generated":{"line":55,"column":65}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":74,"column":51},"generated":{"line":55,"column":66}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":55,"column":67}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":8},"generated":{"line":56,"column":4}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":12},"generated":{"line":56,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":13},"generated":{"line":56,"column":9}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":20},"generated":{"line":56,"column":16}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":21},"generated":{"line":56,"column":17}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":27},"generated":{"line":56,"column":23}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":28},"generated":{"line":56,"column":24}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":36},"generated":{"line":56,"column":32}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":76,"column":37},"generated":{"line":56,"column":33}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":77,"column":4},"generated":{"line":57,"column":2}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":0}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":7}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":8}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":24}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":27}},{"source":"../../src/events/TypedEventTarget.ts","name":null,"original":{"line":78,"column":1},"generated":{"line":59,"column":43}}],"sources":{"../../src/events/TypedEventTarget.ts":"import { EventOfType, TypedCustomEvent } from \"./TypedCustomEvent\";\n\nexport type TypedEventListener<Event extends TypedCustomEvent> = (evt: Event) => void;\n\nexport interface TypedEventListenerOptions {\n    once?: boolean;\n}\n\n/**\n * Extract the generic Events type (which must extend {@link TypedCustomEvent}) from a {@link TypedEventTarget}\n */\nexport type EventsFromTarget<Target extends TypedEventTarget> = Target extends TypedEventTarget<infer Events>\n    ? Events\n    : never;\n\n/**\n * This wrapper around EventTarget provides more descriptive type information. By using this class, calls to EventTarget\n * methods are correctly type checked to ensure only allowed event types are used, and that events and their type\n * strings are correctly associated.\n *\n * For example, when calling TypedEventTarget::addEventListener, the event passed to the callback will have the correct\n * type corresponding to the type of event for which the listener has been added.\n */\nexport class TypedEventTarget<Events extends TypedCustomEvent = TypedCustomEvent> {\n    private readonly listeners: Map<string, TypedEventListener<TypedCustomEvent>[]>;\n    private readonly options: Map<TypedEventListener<TypedCustomEvent>, TypedEventListenerOptions>;\n\n    constructor() {\n        this.listeners = new Map();\n        this.options = new Map();\n    }\n\n    addEventListener<K extends Events[\"type\"]>(\n        type: K,\n        callback: TypedEventListener<EventOfType<K, Events>>,\n        options?: TypedEventListenerOptions\n    ): void {\n        // Safety: the type in the method signature ensures the callback handles events of type K, and we use that type\n        // as the key when storing the callback – we only ever invoke callbacks obtained by mapping from that event\n        // type to the callback, so even though we store the callback with a wider type, we only ever call it with the\n        // specific event type specified by K.\n        const listener = callback as TypedEventListener<TypedCustomEvent>;\n        const listeners = this.listeners.get(type) ?? [];\n        this.listeners.set(type, [...listeners, listener]);\n        if (options) this.options.set(listener, options);\n    }\n\n    dispatchEvent(event: Events): true {\n        const listeners = this.listeners.get(event.type);\n        if (!listeners) return true;\n\n        listeners.forEach((listener) => {\n            const options = this.options.get(listener) ?? {};\n            try {\n                listener(event);\n            } catch (error) {\n                // We'll do our best to immitate native behavior, where if a listener throws an error it is caught and\n                // emitted as an error event on the window – this might be slightly different from native behavior since\n                // we have to use a CustomEvent, but it's as close as we can get.\n                if (window) window.dispatchEvent(new CustomEvent(\"error\", { detail: error }));\n            }\n            if (options.once) this.removeEventListener(event.type, listener);\n        });\n\n        return true;\n    }\n\n    removeEventListener<K extends Events[\"type\"]>(type: K, callback: TypedEventListener<EventOfType<K, Events>>): void {\n        const listener = callback as TypedEventListener<TypedCustomEvent>;\n        const listeners = this.listeners.get(type);\n        if (!listeners) return;\n        this.listeners.set(\n            type,\n            listeners.filter((l) => l !== listener)\n        );\n        this.options.delete(listener);\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"9e8ecf638f3056ba777814672524a97d","cacheData":{"env":{}}}